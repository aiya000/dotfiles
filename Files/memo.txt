"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"

onoremap <silent> q
\      :for i in range(v:count1)
\ <Bar>   call search('.\&\(\k\<Bar>\_s\)\@!', 'W')
\ <Bar> endfor<CR>

function! OverridePaste(type, ...) "{{{
    if a:0
        silent execute "normal! `<" . a:type . "`>\"xp"
    elseif a:type == 'line'
        silent execute "normal! '[V']\"xp"
    elseif a:type == 'block'
        silent execute "normal! `[\<C-V>`]\"xp"
    else
        silent execute "normal! `[v`]\"xp"
    endif
endfunction "}}}
nnoremap <C-p> :<C-u>set opfunc=OverridePaste<CR>g@
nnoremap <C-p><C-p> :<C-u>set opfunc=OverridePaste<CR>g@g@

autocmd FileType perl set isfname-=- isfname-=/ isfname-=+
set includeexpr=substitute(v:fname,'^\\/','','')

noremap <C-j><C-R> :Unite file_mru<CR>
NeoBundle 'thinca/vim-localrc'
NeoBundle 'vim-scripts/closetag.vim'
NeoBundle 'vim-scripts/errormarker.vim'
NeoBundle 'ack.vim'
NeoBundle 'mattn/vimplenote-vim'
NeoBundle 'taglist.vim'
NeoBundle 'airblade/vim-rooter'
NeoBundle 'othree/eregex.vim'
NeoBundle 'motemen/xslate-vim'
NeoBundle 'mattn/sonictemplate-vim'
NeoBundle 'chase/vim-ansible-yaml'
NeoBundle 'gre/play2vim'
NeoBundle 'sorah/unite-ghq'

L421 ã“ã‚Œã¯ poslist.vim æ¡ˆä»¶  12/14 00:00


NeoBundle 'jceb/vim-hier'
NeoBundle 'dannyob/quickfixstatus'
NeoBundle "osyo-manga/shabadou.vim"
NeoBundle "osyo-manga/vim-watchdogs"
NeoBundle "motemen/vim-guess-abbrev"
NeoBundle 'kana/vim-fakeclip'
NeoBundle 'gcmt/wildfire.vim'
NeoBundle "syui/airsave.vim"
NeoBundle 'mileszs/ack.vim'
NeoBundle 'motemen/vim-help-random'
NeoBundle 'sgur/unite-qf'
NeoBundle 'thinca/vim-unite-history'
NeoBundle 'sgur/unite-git_grep'

http://step-learn.com/markdown/index.html


set indentexpr&
NeoBundle 'thinca/vim-showtime'
                L288 visualstar.vim æ¡ˆä»¶  12/27 23:24
vnoremap <silent> * "vy/\V<C-r>=substitute(escape(@v,'\/'),"\n",'\\n','g')<CR><CR>



" è¡Œæœ«ã®åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–(ã†ã¾ãå‹•ã‹ãªã„ï¼Ÿ)
NeoBundle 'bronson/vim-trailing-whitespace'
" lessç”¨ã®syntaxãƒã‚¤ãƒ©ã‚¤ãƒˆ
NeoBundle 'KohPoll/vim-less'


------------------------------------------------------------------------------------------------------------------------------------------------
deris0126     : L105 80æ–‡å­—ã¸ã®åŸ·å¿µã‚’æ„Ÿã˜ã‚‹ã¨æ€ã£ãŸã‚‰â€¦  01/17 23:05
------------------------------------------------------------------------------------------------------------------------------------------------
"set cpo+=a " :read  command with a file name arg will modify the window's alternate file name
( {{{
" Settings for Vi-compatible behavior (Vim default: aABceFs)
" Note: this list is not exhaustive. See :h 'cpo'
 set cpoptions=
"set cpo+=a " :read  command with a file name arg will modify the window's alternate file name
"set cpo+=A " :write command with a file name arg will modify the window's alternate file name
 set cpo+=B " Give backslash no special meaning in mappings, abbreviations and the 'to' part of the menu commands
 set cpo+=c " Searching continues at the end of any match at the cursor position, but not further than the start of the next line
 set cpo+=e " When executing a register with ':@r', always add a <CR> to the last line even when the register is not linewise
 set cpo+=F " :write with a file name argument will set the file name for the current buffer if it doesn't have one already
"set cpo+=i " Interrupting the reading of a file will leave it modified.
 set cpo+=K " Don't wait for a key code to complete
"set cpo+=m " 'Showmatch' will always wait half a second, even if a character is typed within that time period
 set cpo+=q " Joining multiple lines leaves the cursor where it would be when joining two lines
"set cpo+=s " Set buffer options when first entering the buffer instead of when it's created
"set cpo+=t " Search pattern for the tag command is remembered for 'n' command
 set cpo+={ " The |{| and |}| commands also stop at a '{' character at the start of a line.
) }}}
------------------------------------------------------------------------------------------------------------------------------------------------
deris0126     : äººç”Ÿè«¦ã‚ãŒè‚å¿ƒã¨ã„ã†ã®ãŒã‚ã‹ã‚‹  01/17 23:05
thinca        : ä½•ã‚’è«¦ã‚ãŸã‚“ã§ã™?  01/17 23:06
deris0126     : 1è¡Œ80æ–‡å­—ã§æƒãˆã‚‹ã®ã‚’â€¦ > ä½•ã‚’è«¦ã‚ãŸã‚“ã§ã™?  01/17 23:07
------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : L67 ã“ã‚Œã£ã¦ãƒãƒƒãƒ•ã‚¡æ¯ã®è¨­å®šã ã£ãŸã¨æ€ã†ã‚“ã ã‚ˆãªãã€å¤šåˆ†  01/17 23:12
miyako        : L67: ç”»é¢å¤–ã‚‚ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¦ã‚‹ï¼Ÿ  01/17 23:14
------------------------------------------------------------------------------------------------------------------------------------------------
" Syntax Highlighting:
syntax enable                                      " Turn on syntax highlighting
syntax sync minlines=256            " Update syntax highlighting for more lines
set synmaxcol=512                            " Don't syntax highlight long lines
" Default paren match highting is too distracting
highlight! link MatchParen Comment

" Highlight VCS conflict markers
match ErrorMsg '^\(<\|=\|>\)\{7\}\([^=].\+\)\?$'

------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : ãˆãƒ¼ã¨ã€syntax ã¯ã‚ã‚‹ç¨‹åº¦ãƒãƒƒãƒ•ã‚¡ã‚’é¡ã£ã¦ãã“ã‹ã‚‰ syntax ã‚’é©ç”¨ã—ã¦ã„ãã‚“ã§ã™ãŒã€ã©ã‚Œãã‚‰ã„ã¾ã§é¡ã‚‹ã‹ã£ã¦ã“ã¨ã§ã™  01/17 23:15
                ä¾‹ãˆã° 51 è¡Œã¾ã§é¡ã£ãŸã‚‰å®Ÿã¯ãã“ã‹ã‚‰ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆãŒé–‹å§‹ã•ã‚Œã¦ã„ãŸã¨ã—ã¦ã‚‚ã€50è¡Œã¾ã§ã—ã‹é¡ã‚‰ãªã„è¨­å®šã ã£ãŸã‚‰ãã“ã¯ã‚³ãƒ¡ãƒ³ãƒˆã¨ã¯ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œãªã„ã€ã¿ãŸã„ãªæ„Ÿã˜  01/17 23:16
------------------------------------------------------------------------------------------------------------------------------------------------
miyako        : ã‚ã€ãªã‚‹ã»ã©ã€‚çŸ­ã™ãã‚‹ã¨syntaxãŒæ­£ã—ãè§£é‡ˆã§ããªã„ã‚“ã§ã™ã­ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚> thincaã•ã‚“  01/17 23:16
------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : ã¡ãªã¿ã«æœ€å¼·ã¯ syntax sync fromstart ã§ã™ã€‚ãŠå¯Ÿã—ã®é€šã‚Šå¸¸ã«ãƒãƒƒãƒ•ã‚¡ã®å…ˆé ­ã‹ã‚‰è§£é‡ˆã™ã‚‹ã€‚å½“ç„¶ãƒãƒƒãƒ•ã‚¡ãŒã§ã‹ããªã‚Œã°é‡ããªã‚‹  01/17 23:18
------------------------------------------------------------------------------------------------------------------------------------------------
miyako        : fromstartã‚„ã°ã„ã§ã™ã­www  01/17 23:19
------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : ã—ã‹ã—ç¢ºå®Ÿã«æ­£ã—ã(ã‚‚ã¡ã‚ã‚“syntaxå®šç¾©ã®ç¯„å›²å†…ã§)ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã‚‹ã®ã§ã€ç§ã¯ãŸã¾ã«ä½¿ã£ã¡ã‚ƒã†  01/17 23:19
                ã“ã‚Œãã‚‚ãã‚‚è‰¯ããªã„ã®ãŒã€ã“ã‚Œãƒãƒƒãƒ•ã‚¡æ¯ã§ã€å¤§ä½“ syntax å®šç¾©å†…ã«æ›¸ã‹ã‚Œã¦ã‚‹ã®ã ã‚ˆã­ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹æ‰‹æ®µæ¬²ã—ã„æ„Ÿã‚ã‚‹ã€‚Syntax ã‚¤ãƒ™ãƒ³ãƒˆã§ä¸Šæ›¸ãè¨­å®šã—ã‚ã£ã¦ã“ã¨ãªã®ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©  01/17 23:20
------------------------------------------------------------------------------------------------------------------------------------------------
miyako        : ãˆã€ãã†ã ã£ãŸã‚“ã§ã™ã‹ãƒ»ãƒ»ãƒ» >  syntax å®šç¾©å†…ã«æ›¸ã‹ã‚Œã¦ã‚‹  01/17 23:21
------------------------------------------------------------------------------------------------------------------------------------------------
haya14busa    : markdownã§é »ç¹ã«ã‚·ãƒ³ã‚¿ã‚¯ã‚¹å£Šã‚Œã‚‹ã®ã§ã„ã˜ã‚ŠãŸã„  01/17 23:21
------------------------------------------------------------------------------------------------------------------------------------------------
miyako        : ã‚ã€ã“ã‚ŒãŒåŸå› ã ã£ãŸã‚“ã§ã™ã­ > markdownã§é »ç¹ã«ã‚·ãƒ³ã‚¿ã‚¯ã‚¹å£Šã‚Œã‚‹  01/17 23:22
------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : autocmd Syntax markdown syntax sync fromstart
                ã“ã‚Œã§ã‚‚ã—ã‹ã—ãŸã‚‰æ”¹å–„ã•ã‚Œã‚‹ã‹ã‚‚ã‚ã‹ã‚‰ã‚“  01/17 23:25
------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : comments ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã ã„ãŸã„ãƒãƒƒãƒ•ã‚¡æ¯ãªã®ã§ã€ftplugin ãŒã—ã£ã‹ã‚Šã—ã¦ã„ã‚Œã°å®šç¾©ã•ã‚Œã¦ã„ãŸã‚Šã—ã¾ã™ã­  01/17 23:23
                ã‚ã¨ã¯ã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚ºãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã‚ˆã•ãŒç”Ÿã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹  01/17 23:27
                :help :syn-sync-fourth  01/17 23:27
thinca        : æ­£ç›´ä½•è¨€ã£ã¦ã‚‹ã®ã‹ã‚ã‹kã‚‰ã‚“ãƒ¬ãƒ™ãƒ«ã®é›£ã—ã•ãŒã‚ã‚Šã€å¸¸äººã«è¨­å®šã™ã‚‹ã®ã¯å›°é›£æ„Ÿã‚’é†¸ã—å‡ºã—ã¦ã„ã‚‹  01/17 23:28
------------------------------------------------------------------------------------------------------------------------------------------------
set comments-=s1:/*,mb:*,ex:*/                        " /* Make C-style comments
set comments+=s:/*,mb:\ *,ex:\ */                     "  * wrap like this
set comments+=fb:*                                    "  */

------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : ä»Šè‡ªåˆ†ã®è¨­å®šç¢ºèªã—ãŸã‚‰ <C-g><C-u> ã§ç›´å‰ã«å…¥åŠ›ã—ãŸå˜èªã‚’å…¨ã¦å¤§æ–‡å­—ã«ã™ã‚‹ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ãŒæ–½ã•ã‚Œã¦ã„ãŸ  01/17 23:45
------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------------------
thinca        : arpeggio.vim ã®å‡ºç•ªã¨èã„ã¦ >2æœ¬æŒ‡  01/18 00:03
thinca        : arpeggio.vim ã¯åŒæ™‚æŠ¼ã—ã«ã‚ˆã‚‹ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’å®Ÿç¾ã™ã‚‹ç¥ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™  01/18 00:05
thinca        : jk ã‚’ã»ã¼åŒæ™‚ã«æŠ¼ã—ãŸå ´åˆã®ã¿ç™ºå‹•ã—ã€æ™®æ®µã¯ j ã¨ k ã¯æ™®é€šã«æ‰“ã¦ã‚‹ã€ã¿ãŸã„ãªã“ã¨ãŒã§ãã‚‹(ãŸã ã—è‰²ã€…ã¨ã‚„ã‚„ã“ã—ããªã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹)  01/18 00:05
deris0126     : arpeggio.vimä¾¿åˆ©ãªã®ã‚ã‹ã£ã¦ã‚‹ã‘ã©ã€ã‚ã‚Œã«ä¾å­˜ã™ã‚‹ã¨ç´ Vimã§è¨­å®šå‡ºæ¥ãªã„ã¨ããªãæœªæ¥ãŒè¦‹ãˆãŸã®ã§ã€ä½¿ã†ã®ã‚„ã‚ã¦ã—ã¾ã£ãŸ  01/18 00:06
kamichidu     : ä¾¿åˆ©ãã†ã ã‘ã©ã€åŒæ™‚æŠ¼ã—ã¯ã‚­ãƒ¼ã‚¿ãƒƒãƒã®ãƒªã‚ºãƒ ãŒæ°—ã«ãªã£ã¦ã—ã¾ã†  01/18 00:07
------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------------------
haya14busa    : L236 ãªã‚‹ã»ã©ãã‚“ãªæ‰‹ãŒã‚ã‚‹ã®ã‹...ã™ã”ã„  01/18 00:08
------------------------------------------------------------------------------------------------------------------------------------------------

https://github.com/kana/vim-niceblock
set nrformats=hex,alpha                     " Accepted bases for <C-A> and <C-X>

------------------------------------------------------------------------------------------------
http://d.hatena.ne.jp/osyo-manga/20120118/1326838173
------------------------------------------------------------------------------------------------


" --- --- --- "
2015å¹´01æœˆ24æ—¥ 23æ™‚01åˆ†41ç§’
" --- --- --- "

set backupext=.bak
set backupskip+=*/shm/*
set nowritebackup

" A few very important custom digraphs
if has('digraphs')
  digraph ./ 8230  " Ellipsis (HORIZONTAL ELLIPSIS U+2026)
  digraph %% 8984  " Mac command key (PLACE OF INTEREST SIGN U+2318)
  digraph 8: 9731  " Snowman (SNOWMAN U+2603)
endif

" Insert four spaces when Tab is pressed
set softtabstop=4
" Indent intelligently to 'shiftwidth' at the starts of lines with Tab, but
" use 'tabstop' everywhere else
set smarttab
" When indenting lines with < or >, round the indent to a multiple of
" 'shiftwidth', so even if the line is indented by one space it will indent
" up to 4 and down to 0, for example
set shiftround
" Don't join lines with two spaces at the end of sentences; I don't two-space,
" despite the noble Steve Losh's exhortations
set nojoinspaces


----------------------------------------------------------------------------------------------------------------------------------------------------------------
 aiya000      : includeã•ã‚Œã‚‹ã®ä¿ç®¡ã§ãã‚‹ã®ã™ã”ã„ã€è³¢ã“Vimã€‚  01/24 23:12
 thinca       : ãã‚Œã‚’ä½¿ã†ã“ã¨ã§ Java ã® import ã‚‚ã–ã£ãã‚Šè¾¿ã‚‹ã“ã¨ãŒã§ããªãã‚‚ãªã„  01/24 23:13
 rbtnn        : L429 Kã‚’NOPã«ã—ã¦ã„ã‚‹ã®ã‹ã€ã‚‚ã£ãŸã„ãªã„  01/24 23:13
 aiya000      : ãˆã£ã€ãã†ãªã‚“ã§ã™ã­ï¼ï¼Ÿ
                Vimã™ã”ã„ã€‚  01/24 23:13
 thinca       : :help 'includeexpr'  01/24 23:14
 kamichidu    : &path ã«classpathè¨­å®šã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã‚Šã€.jarã¨ã‹ã¯å¯¾å¿œã—ã¦ãªã„ã®ã§ã¤ã‚‰ã„ã¨ã“ã‚ã¯ã‚ã‚‹  01/24 23:16
----------------------------------------------------------------------------------------------------------------------------------------------------------------


st formatoptions+=j

" Preserve the flags for a pattern when repeating a substitution with &; I don't
" really understand why this isn't a default, but there it is
nnoremap & :&&<CR>
vnoremap & :&&<CR>

" Try to run the version of matchit.vim included in the distribution, if there
" is one; extends % to match more than it does by default
silent! runtime macros/matchit.vim

" Don't use modelines at all, they're apparently potential security problems
" and I've never used them anyway
set nomodeline

" Don't assume a number with a leading zero is octal; it's far more likely a
" zero-padded decimal, so increment and decrement with ^A and ^X on that basis
set nrformats-=octal

" Don't use modelines at all, they're apparently potential security problems
" and I've never used them anyway
set nomodeline

" Don't keep .viminfo information for files in temporary directories or shared
" memory filesystems; this is because they're used as scratch spaces for tools
" like sudoedit(8) and pass(1) and hence could present a security problem
if has('viminfo') && has('autocmd')
  augroup viminfoskip
    autocmd!
    silent! autocmd BufNewFile,BufReadPre
        \ /tmp/*,$TMPDIR/*,$TMP/*,$TEMP/*,*/shm/*
        \ setlocal viminfo=
  augroup END
endif

" Don't bother about checking whether Escape is being used as a means to enter
" a Meta-key combination, just register Escape immediately
set noesckeys

" set eventignore

" Don't resize windows we're not splitting (Tmux-like; think Mondrian)
set noequalalways

" Only show the tab bar if there's more than one tab
if exists('&showtabline')
  set showtabline=1
endif

" Use the tilde as an operator with motions, rather than just swapping the
" case of the character under the cursor
set tildeop

----------------------------------------------------------------------------------------------------------------------------------------------------------------
thinca       : :command ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ãŸå ´åˆã«å®šç¾©å†…ã§ä½¿ãˆã‚‹ã‚„ã¤ã§ã™ã­ ><bang>  01/24 23:42
thinca       : :help <bang>  01/24 23:42
thinca       : bang ãŒã‚³ãƒãƒ³ãƒ‰ã«ä¸ãˆã‚‰ã‚ŒãŸã‹ã©ã†ã‹ã‚’å¼ã§åˆ¤å®šã™ã‚‹ã‚¨ãƒ‡ã‚£ã‚ªãƒ ã‚‚ã‚ã‚Šã¾ã™ã€‚
               function MyCommand(is_bang)
                 " ...
               endfunction
               command -bang MyCommand call MyCommand(<bang>0)  01/24 23:46
               <bang>0 ã¨ã™ã‚‹ã“ã¨ã§ã€! ãŒä¸ãˆã‚‰ã‚Œã‚‹ã¨ !0 ã«ãªã£ã¦ 1 ã«ãªã‚Šã¾ã™  01/24 23:46
----------------------------------------------------------------------------------------------------------------------------------------------------------------

" Get rid of visually noisy folding characters
if has('folding')
  let &fillchars = 'diff: ,fold: ,vert: '
endif

" Don't write the output of :make to the terminal
set shellpipe=>

" Allow jumping between windows and tabs to find an open instance of a given
" buffer with :sbuffer.
if v:version >= 701
  set switchbuf=useopen,usetab
else
  set switchbuf=useopen
endif

" Threshold is 10 MB in size
let g:bigfilesize = 10 * 1024 * 1024

setlocal synmaxcol=256


"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
" mtth


let g:netrw_home = g:runtimepath . '/cache/netrw'                             " cache directory for file explorer
let g:netrw_banner = 0                                                        " hide help banner (can be shown with `I`)

"NOTE: mtth's plugins

" Compile
https://github.com/mtth/compile.vim
let g:compile_default_flags = {
\ 'rst2html': '--stylesheet-path=b.css,p/default.css % &%:r.html',
\ 'haml': '% &%:r.html',
\ 'jade': '%',
\ 'coffee': '%',
\ 'hamlc': '--input %:h --output &%:h/jst.js',
\ 'stylus': '%',
\ 'cc': '% -o &%:r'
\ }

" Cursorcross
https://github.com/mtth/cursorcross.vim

https://github.com/mtth/scratch.vim

"NOTE: plugins
" Locate
" Ultisnips
" Virtualenv
" Solarized
let g:solarized_termtrans = 1                                               " transparent background sometimes
let g:solarized_visibility = 'normal'                                       " visibility of 'list' characters



set diffopt=filler,vertical
set eadirection=hor                                                         " only resize automatically horizontally (cf. ``equalalways`` option)
set nostartofline                                                           " keeps cursor on current column for movements like H, M, ...
set shellredir=>%s\ 2>&1                                                    " otherwise syntastic isn't able to pick up checker versions
set comments-=:%                                                            " these shouldn't be considered comments by default
set formatlistpat=^\\s*\\(\\d\\(\\d\\ze\\d*[\\]:.)}]\\\|[\\]:.)}]\\ze\\)\\\|:[^:]\\ze[^:]*:\\\|[*+-]\\)\\s
if v:version >=# 704
  set formatoptions=rqnlj                                                   " only manual formatting by default
else
  set formatoptions=rqnl                                                    " j option not supported before 7.4
endif
let &dictionary = '/usr/share/dict/words,'                                  " files where to load word for dictionary
let &dictionary .= g:runtimepath . '/spell/custom.utf-8.add'                " completion for use with <c-x><c-k>


haya14busa   : visual-staræ¡ˆä»¶ã   03/08 00:10
" enable search for selected text, forwards (*) or backwards (#)
xnoremap <silent> * :<c-u>
  \let old_reg=getreg('"')<bar>let old_regtype=getregtype('"')<cr>
  \gvy/<c-r>=substitute(
  \escape(@", '/\.*$^~['), '\_s\+', '\\_s\\+', 'g')<cr><cr>
  \:call setreg('"', old_reg, old_regtype)<cr>
xnoremap <silent> # :<c-u>
  \let old_reg=getreg('"')<bar>let old_regtype=getregtype('"')<cr>
  \gvy?<c-r>=substitute(
  \escape(@", '?\.*$^~['), '\_s\+', '\\_s\\+', 'g')<cr><cr>
  \:call setreg('"', old_reg, old_regtype)<cr>

" easier indentation in visual mode
xnoremap > >gv
xnoremap < <gv
" arglist
nnoremap <leader>a :args<cr>
" show locations of latest changes
nnoremap <leader>J :changes<cr>
" show latest jumps
nnoremap <leader>j :jumps<cr>
" browse oldfiles
nnoremap <leader>o :browse oldfiles<cr>
" copy to tmux buffer
xnoremap <leader>t :w !tmux loadb -<cr>

" open .vimrc (following potential symbolic link)
nnoremap <leader>ve :tabnew <c-r>=resolve(expand($MYVIMRC))<cr><cr>:help<cr><c-w>L:vertical resize 80<cr>:set winfixwidth<cr><c-w>h
"source .vimrc (and rerun any filetype settings)
nnoremap <leader>vs :source $MYVIMRC<cr>:filetype detect<cr>


" smart indentation
inoremap <expr> <s-tab> <SID>smart_tab()
function! s:smart_tab() "{{{
  " fills in line with character before cursor until one of the following
  " * matches indent of characters preceded by two or more whitespace characters
  "   in the first non-empty line above
  " * texwidth
  " * next tabstop
  " if the current line is empty, the fill character will be a single space
  let [buf_name, line_number, col_number, off_number] = getpos('.')
  let cur_line = getline(line_number)
  if strlen(cur_line)
    let fill_char = cur_line[col('.') - 2]
  else
    let fill_char = ' '
  endif
  let line_content = ''
  while !strlen(line_content) && line_number >=# 1
    let line_number -= 1
    let line_content = getline(line_number)
  endwhile
  let line_content = line_content[col('.') - 1:]
  let offset = match(line_content, '\s\s\zs\S\|$')
  if offset ># 0
    return repeat(fill_char, offset)
  elseif &textwidth && col_number <=# &textwidth
    return repeat(fill_char, &textwidth - col_number + 1)
  else
    return repeat(fill_char, &tabstop - (col_number - 1) % &tabstop)
  endif
endfunction "}}}
" expand inline parenthesis arguments to multiline
nnoremap gJ 0f(a<cr><esc>f)i<cr><esc>kI<tab><esc>0dw:s/\v,\s+/,\r/g<cr>``<c-v>``I<c-r>"<esc>``A



"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
" hotchpotch

Bundle 'ciaranm/detectindent'
Bundle 'L9'
Bundle 'FuzzyFinder'
Bundle 'rizzatti/funcoo.vim'
Bundle 'rizzatti/dash.vim'

" We know xterm-debian is a color terminal
if &term =~ "xterm-debian" || &term =~ "xterm-xfree86" || &term =~ "xterm-256color"
 set t_Co=16
 set t_Sf=[3%dm
 set t_Sb=[4%dm
endif

if &term =~ "screen"
  " screen Buffer åˆ‡ã‚Šæ›¿ãˆã§ screen ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤º
  autocmd BufEnter * if bufname("") !~ "^\[A-Za-z0-9\]*://" | silent! exe '!echo -n "kv:%\\"' | endif
  autocmd VimLeave * silent! exe '!echo -n "kvim\\"'
endif

" command line ã§ command window é–‹ã
set cedit=<C-O>

" str2numchar.vim
" ç¯„å›²é¸æŠã—ã¦ã‚‹æ–‡å­—åˆ—ã‚’å¤‰æ›
vnoremap <silent> sn :Stn2NumChar<CR> " ã‚ => &#12354;
vnoremap <silent> sh :Str2HexLiteral<CR> " ã‚ => \\xE3\\x81\\x82

" é©å½“ãªãƒ†ãƒ³ãƒãƒ©ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
command! -nargs=0 NewTmp :new `=tempname().'.vim'`

" ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®é«˜ã•ã‚’é¸æŠç¯„å›²ã¨åŒã˜ã«ãªã‚‹ã‚ˆã†èª¿æ•´
vnoremap <silent> _ <Esc>`<zt:execute (line("'>") - line("'<") + 1) 'wincmd' '_'<Return>

++enc

" yanktmp.vim
noremap <silent> sy :call YanktmpYank()<CR>
noremap <silent> sp :call YanktmpPaste_p()<CR>

" ç¬¬äºŒå¼•æ•°å–ã‚Œã‚‹ã®ã‹ãƒ¼
system("pbcopy", @0)

set nofsync
set grepprg=internal

" æ¤œç´¢ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«å…¥ã£ã¦ã‚‹æ–‡å­—ã§ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã€quickfix ã§é–‹ã
nnoremap <unique> g/ :exec ':vimgrep /' . getreg('/') . '/j %\|cwin'<CR>
" G/ ã§ã¯ã™ã¹ã¦ã®ãƒãƒƒãƒ•ã‚¡
" nnoremap <unique> G/ :silent exec ':cexpr "" \| :bufdo vimgrepadd /' . getreg('/') . '/j %'<CR>\|:silent cwin<CR>

" ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æ¤œç´¢
function! Bgrep(word)
  cexpr '' " quickfix ã‚’ç©ºã«
  silent exec ':bufdo | try | vimgrepadd ' . a:word . ' % | catch | endtry'
  silent cwin
endfunction
command! -nargs=1 Bgrep :call Bgrep(<f-args>)

" å¼•æ•°ã®æ–‡å­—åˆ—ã‚’ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã‹ã‚‰å†å¸°çš„ã«æ¤œç´¢
function! Findgrep(arg)
  let findgrep_cmd = 'find . -type f ! -regex ".*\.svn.*" ! -regex ".*\.git.*" ! -regex ".*\.sw.*" ! -regex ".*tags" -print0 |xargs -0 grep -n '
  cgetexpr system(findgrep_cmd . a:arg)
  silent cwin
endfunction
command! -nargs=1 Findgrep :call Findgrep(<f-args>)

" changelog
let g:changelog_username = "Yuichi Tateno"
let g:changelog_dateformat = '== %Y-%m-%d'
let g:changelog_new_entry_format= '  * %c'

" ack.vim 
let g:AckAllFiles=0

" - ã‚‚ fname ã«å«ã‚€
autocmd BufRead * setlocal isfname+=- " ã©ã“ã‹ã® plugin ã§ä¸Šæ›¸ãã•ã‚Œã¦ã‚‹ï¼Ÿ
set isfname+=-

" QuickFix ã®ã‚µã‚¤ã‚ºèª¿æ•´,è‡ªå‹•ã§æŠœã‘ã‚‹ 
function! s:autoCloseQuickFix()
  let qllen = min([10, len(getqflist())])
  cclose
  if qllen
    execute 'cw' . qllen
    normal <C-W><C-W>
  endif
  redraw
endfunction
autocmd QuickFixCmdPost * :call s:autoCloseQuickFix()
" quickfix ã‚’é–‰ã˜ã‚‹
nnoremap <unique> ec :cclose<CR>

" jptemplate.vim
let g:jpTemplateKey = '<Tab>'

" {{{ QFixHowm.vim
let QFixHowm_Key = 'g'
if has('win32')
  let howm_dir             = 'c:/dropbox/My Dropbox/howm'
  let QFixHowm_MruFile     = 'c:/dropbox/My Dropbox/howm/.howm-mru'
else
  let howm_dir             = '~/Dropbox/howm'
  let QFixHowm_MruFile     = '~/Dropbox/howm/.howm-mru'
end
let howm_filename        = '%Y/%m/%Y-%m-%d-%H%M%S.howm'
let howm_fileencoding    = 'utf-8'
let howm_fileformat      = 'unix'
let QFixHowm_MruFileMax = 50
let QFixHowm_Title = '='
" let disable_MyQFix = 1

"ã‚¿ã‚¤ãƒˆãƒ«ã«ä½•ã‚‚æ›¸ã‹ã‚Œã¦ã„ãªã„å ´åˆã€ã‚¨ãƒ³ãƒˆãƒªå†…ã‹ã‚‰é©å½“ãªæ–‡ã‚’æ¢ã—ã¦è¨­å®šã™ã‚‹ã€‚
""æ–‡å­—æ•°ã¯åŠè§’æ›ç®—ã§æœ€å¤§ QFixHowm_Replace_Title_len æ–‡å­—ã¾ã§ä½¿ç”¨ã™ã‚‹ã€‚0ãªã‚‰ä½•ã‚‚ã—ãªã„ã€‚
"let QFixHowm_Replace_Title_Len = 64

"å¯¾è±¡ã«ãªã‚‹ã®ã¯ QFixHowm_Replace_Title_Pattern
"ã®æ­£è¦è¡¨ç¾ã«ä¸€è‡´ã™ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚
""ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æ¬¡ã®æ­£è¦è¡¨ç¾ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã€‚
"let QFixHowm_Replace_Title_Pattern = '^'.g:QFixHowm_Title.'\s*$'

"æ–°è¦ã‚¨ãƒ³ãƒˆãƒªã®éš›ã€æœ¬æ–‡ã‹ã‚‰æ›¸ãå§‹ã‚ã‚‹ã€‚
"let QFixHowm_Cmd_New = "i".QFixHowm_Title." \<CR>\<C-r>=strftime(\"[%Y-%m-%d%H:%M]\")\<CR>\<CR>\<ESC>$"
"",Cã§æŒ¿å…¥ã•ã‚Œã‚‹æ–°è¦ã‚¨ãƒ³ãƒˆãƒªã®ã‚³ãƒãƒ³ãƒ‰
"let QFixHowm_Key_Cmd_C = "o<ESC>".QFixHowm_Cmd_New

" }}}


"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
" 2015-03-28

" Installation check.
if neobundle#exists_not_installed_bundles()
  echomsg 'Not installed bundles : ' .
          \ string(neobundle#get_not_installed_bundle_names())
  echomsg 'Please execute ":NeoBundleInstall" command.'
              "finish
endif

" ã™ã¹ã¦ã®æ•°å€¤ã‚’10é€²æ•°ã¨è€ƒãˆã‚‹"
set nrformats =

"" çµ‚äº†ã™ã‚‹ã¨ãã«ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹
autocmd BufWinLeave *? silent mkview
autocmd BufWinEnter *? silent loadview

"" commentã‚’è‡ªå‹•ã§æŒ¿å…¥ã—ãªã„
set formatoptions-=r
------------------------------------------------------------------------------------------------------------------------------------------------
cohama        : L456 formatoptions ã¯ç›´ã§ã“ã†ã„ã†é¢¨ã«æ›¸ã„ã¦ã‚‚ ftplugin ã§ç„¡åŠ¹ã«ã•ã‚Œã¡ã‚ƒã†ã“ã¨ãŒã‚ã‚‹ã‚“ã ã‚ˆãªã...ã€‚  03/28 23:22
                çµè«– ftplugin ãŒæ‚ªã„  03/28 23:22
------------------------------------------------------------------------------------------------------------------------------------------------

"" "%"ã®æ‹¡å¼µ
runtime macros/matchit.vim
runtime macros/editexisting.vim


" quickrun.vim ç”¨è¨­å®š
let g:quickrun_config['python.test'] = {'command': 'nosetests', 'exec': ['%c -v %s']}
let g:quickrun_config['python'] = {'command': 'python3'}

let g:quickrun_config['maxima'] = {'command': 'maxima', 'exec': ['%c -b %s']}
" blockdiag
let g:quickrun_config['blockdiag'] = {
            \'command': 'blockdiag',
            \'exec': ['%c -a %s -o %{expand("%:r")}.png', 'display %{expand("%:r")}.png'],
            \'outputter':'message',
            \}

let g:quickrun_config['tex'] = {
            \'command': 'platex',
            \'exec': ['%c %s && dvipdfmx %{expand("%:r").dvi && evince'],
            \'outputter': 'message'
            \}

let g:quickrun_config['plantuml'] = {
            \'command': 'java',
            \'exec': [
                \'%c -jar ~/bin/plantuml.8020.jar %s -tpng',
                \'display %s:p:r.png'
                \],
            \'outputter': 'null'
            \}
------------------------------------------------------------------------------------------------------------------------------------------------
yassu0320     : ã¡ã‚‡ã£ã¨ã ã‘blockdiagã®pluginå®£ä¼https://bitbucket.org/yassu0320/blockdiagcontrib-tex  03/28 23:45
------------------------------------------------------------------------------------------------------------------------------------------------


"" task
let g:task_suffix = "task"
let g:task_path = "~/Dropbox/task/"
let g:task_date = "%Y/%m/%d(%a) %H:%M"
function! s:task_edit(...) "{{{
    " assume that len(a:000) <= 1
let l:advance = get(a:, 1, '0')
python << EOF
import vim
from datetime import datetime, timedelta

date = datetime.today()
advance_day = int(vim.eval('l:advance'))
date += timedelta(days=advance_day)
task_filename = '%02d' % date.year + '-%02d' % date.month + '-%02d' % date.day
task_filename += '.' + vim.eval('g:task_suffix')
vim.command("execute 'e' g:task_path . '{}'".format(task_filename))
EOF
endfunction
" }}}
command! -nargs=? TEdit call s:task_edit(<f-args>)
command! -nargs=1 TGrep :execute 'vimgrep' <f-args> g:task_path. '/*'

set makeprg=scons


NeoBundle 'yegappan/mru'
NeoBundle 'jlanzarotta/bufexplorer'
NeoBundle 'Yggdroot/indentLine'
NeoBundle 'bronson/vim-trailing-whitespace'
NeoBundle 'plasticboy/vim-markdown'
NeoBundle 'vim-scripts/maxima.vim'
NeoBundle 'mhaig/vim-blockdiag-series'
NeoBundle 'aklt/plantuml-syntax'
NeoBundle 'nicoraffo/conque'
NeoBundle 'rhysd/committia.vim'
NeoBundle 'yassu/todo-env.vim'
NeoBundle 'ngmy/vim-rubocop'


NeoBundle 'xolox/vim-session', {
    \ 'depends': 'xolox/vim-misc'
\}
" ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã® .vimsessions/ ã‚’å–å¾— 
let s:local_session_directory = xolox#misc#path#merge(getcwd(), '.vimsessions')
" å­˜åœ¨ã™ã‚Œã°
if isdirectory(s:local_session_directory)
  " sessionä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®š
  let g:session_directory = s:local_session_directory
  " vimã‚’è¾ã‚ã‚‹æ™‚ã«è‡ªå‹•ä¿å­˜
  let g:session_autosave = 'yes'
  " å¼•æ•°ãªã—ã§vimã‚’èµ·å‹•ã—ãŸæ™‚ã«sessionä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®default.vimã‚’é–‹ã
  let g:session_autoload = 'yes'
else
  let g:session_autosave = 'no'
  let g:session_autoload = 'no'
endif
unlet s:local_session_directory
command! SaveS :SaveSession

autocmd BufNewFile *.rb 0r ~/.vim/templates/rb.tpl


"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"

"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
" 11  4æœˆ 2015

" Load vimrc from current directory and disable unsafe commands in them
set exrc
set secure

" Use UTF-8 without BOM
set encoding=utf-8 nobomb

" =============================================================================
" Terminal Interaction
" =============================================================================

" Prevent Vim from clearing the scrollback buffer
" http://www.shallowsky.com/linux/noaltscreen.html
set t_ti= t_te=

" Clear PAGER if Vim's Man function is needed
let $PAGER=''


" Don't reset cursor to start of line when moving around
set nostartofline

" Do not jump to the matching bracket upon bracket insert (default)
set noshowmatch


set stl+=%{fugitive#statusline()} " git via fugitive.vim
set gdefault   " Use global search by default

" Some file types use real tabs
au FileType {make,gitconfig} set noexpandtab sw=4

" Update syntax highlighting for more lines increased scrolling performance
syntax sync minlines=256

" Don't syntax highlight long lines
set synmaxcol=256


""
"" Smooth Scroll
""

noremap <silent> <c-u> :call smooth_scroll#up(&scroll, 12, 2)<cr>
noremap <silent> <c-d> :call smooth_scroll#down(&scroll, 14, 2)<cr>
noremap <silent> <c-b> :call smooth_scroll#up(&scroll*2, 22, 4)<cr>
noremap <silent> <c-f> :call smooth_scroll#down(&scroll*2, 24, 4)<cr>



"#-=- -=- -=- -=- -=- -=- -=- -=- -=-#"
vim:ft=vim:
